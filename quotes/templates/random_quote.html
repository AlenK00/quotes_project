<!DOCTYPE html>
<html>
<head>
    <title>–°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞</title>
</head>
<body>
    <h1>–°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞</h1>
    
    {% if quote %}
    <div style="border: 1px solid #ccc; padding: 20px; margin: 20px;">
        <p>"{{ quote.text }}"</p>
        <p><strong>–ò—Å—Ç–æ—á–Ω–∏–∫:</strong> {{ quote.source.name }} ({{ quote.source.get_type_display }})</p>
        <p>–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: {{ quote.views }}</p>
        
        <button onclick="likeQuote({{ quote.id }})">üëç {{ quote.likes }}</button>
        <button onclick="dislikeQuote({{ quote.id }})">üëé {{ quote.dislikes }}</button>
    </div>
    {% else %}
    <p>–ü–æ–∫–∞ –Ω–µ—Ç —Ü–∏—Ç–∞—Ç. <a href="{% url 'add_quote' %}">–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é</a></p>
    {% endif %}
    
    <a href="{% url 'add_quote' %}">–î–æ–±–∞–≤–∏—Ç—å —Ü–∏—Ç–∞—Ç—É</a> | 
    <a href="{% url 'popular_quotes' %}">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ü–∏—Ç–∞—Ç—ã</a>
    
    <script>
    function likeQuote(quoteId) {
        fetch(`/like/${quoteId}/`)
            .then(response => response.json())
            .then(data => {
                document.querySelector(`button[onclick="likeQuote(${quoteId})"]`).textContent = `üëç ${data.likes}`;
            });
    }
    
    function dislikeQuote(quoteId) {
        fetch(`/dislike/${quoteId}/`)
            .then(response => response.json())
            .then(data => {
                document.querySelector(`button[onclick="dislikeQuote(${quoteId})"]`).textContent = `üëé ${data.dislikes}`;
            });
    }
    </script>
</body>
</html>