{% extends 'base.html' %}

{% block title %}–°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞{% endblock %}

{% block header %}üé≤ –°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞{% endblock %}

{% block content %}
{% if quote %}
<div class="quote-card">
    <p class="quote-text">"{{ quote.text }}"</p>
    <p class="quote-source"><strong>–ò—Å—Ç–æ—á–Ω–∏–∫:</strong> {{ quote.source.name }} ({{ quote.source.get_type_display }})</p>
    <p class="quote-source">–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: {{ quote.views }}</p>
    
    <div class="quote-stats">
        <button class="quote-btn" id="like-btn-{{ quote.id }}">üëç {{ quote.likes }}</button>
        <button class="quote-btn" id="dislike-btn-{{ quote.id }}">üëé {{ quote.dislikes }}</button>
    </div>
</div>
{% else %}
<div class="quote-card">
    <p class="quote-text">–ü–æ–∫–∞ –Ω–µ—Ç —Ü–∏—Ç–∞—Ç.</p>
    <a href="{% url 'add_quote' %}" class="btn">–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é</a>
</div>
{% endif %}
{% endblock %}

{% block scripts %}
{% if quote %}
<script>
document.getElementById('like-btn-{{ quote.id }}').addEventListener('click', function() {
    fetch('/like/{{ quote.id }}/')
        .then(function(response) {
            return response.json();
        })
        .then(function(data) {
            document.getElementById('like-btn-{{ quote.id }}').textContent = 'üëç ' + data.likes;
        });
});

document.getElementById('dislike-btn-{{ quote.id }}').addEventListener('click', function() {
    fetch('/dislike/{{ quote.id }}/')
        .then(function(response) {
            return response.json();
        })
        .then(function(data) {
            document.getElementById('dislike-btn-{{ quote.id }}').textContent = 'üëé ' + data.dislikes;
        });
});
</script>
{% endif %}
{% endblock %}