{% extends 'base.html' %}

{% block title %}–°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞{% endblock %}

{% block header %}üé≤ –°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞{% endblock %}

{% block content %}
{% if quote %}
<div class="quote-card">
    <p class="quote-text">"{{ quote.text }}"</p>
    <p class="quote-source"><strong>–ò—Å—Ç–æ—á–Ω–∏–∫:</strong> {{ quote.source.name }} ({{ quote.source.get_type_display }})</p>
    <p class="quote-source">–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: {{ quote.views }}</p>
    
    <div class="quote-stats">
        <button class="quote-btn" id="like-btn-{{ quote.id }}">üëç {{ quote.likes }}</button>
        <button class="quote-btn" id="dislike-btn-{{ quote.id }}">üëé {{ quote.dislikes }}</button>
    </div>
</div>
{% else %}
<div class="quote-card">
    <p class="quote-text">–ü–æ–∫–∞ –Ω–µ—Ç —Ü–∏—Ç–∞—Ç.</p>
    <a href="{% url 'add_quote' %}" class="btn">–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é</a>
</div>
{% endif %}
{% endblock %}

{% block scripts %}
{% if quote %}
<script>
document.getElementById('like-btn-{{ quote.id }}').addEventListener('click', function() {
    fetch('/like/{{ quote.id }}/')
        .then(function(response) {
            return response.json();
        })
        .then(function(data) {
            document.getElementById('like-btn-{{ quote.id }}').textContent = 'üëç ' + data.likes;
        });
});

document.getElementById('dislike-btn-{{ quote.id }}').addEventListener('click', function() {
    fetch('/dislike/{{ quote.id }}/')
        .then(function(response) {
            return response.json();
        })
        .then(function(data) {
            document.getElementById('dislike-btn-{{ quote.id }}').textContent = 'üëé ' + data.dislikes;
        });
});
</script>
{% endif %}
{% endblock %}


<!--<!DOCTYPE html>
<html>
<head>
    <title>–°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞</title>
</head>
<body>
    <h1>–°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞</h1>
    
    {% if quote %}
    <div style="border: 1px solid #ccc; padding: 20px; margin: 20px;">
        <p>"{{ quote.text }}"</p>
        <p><strong>–ò—Å—Ç–æ—á–Ω–∏–∫:</strong> {{ quote.source.name }} ({{ quote.source.get_type_display }})</p>
        <p>–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: {{ quote.views }}</p>
        
        <button id="like-btn-{{ quote.id }}">üëç {{ quote.likes }}</button>
        <button id="dislike-btn-{{ quote.id }}">üëé {{ quote.dislikes }}</button>
    </div>
    {% else %}
    <p>–ü–æ–∫–∞ –Ω–µ—Ç —Ü–∏—Ç–∞—Ç. <a href="{% url 'add_quote' %}">–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é</a></p>
    {% endif %}
    
    <a href="{% url 'add_quote' %}">–î–æ–±–∞–≤–∏—Ç—å —Ü–∏—Ç–∞—Ç—É</a> | 
    <a href="{% url 'popular_quotes' %}">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ü–∏—Ç–∞—Ç—ã</a> |
    <a href="{% url 'dashboard' %}">üìä –î–∞—à–±–æ—Ä–¥</a>
    
    <script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ª–∞–π–∫–æ–≤
    document.getElementById('like-btn-{{ quote.id }}').addEventListener('click', function() {
        fetch('/like/{{ quote.id }}/')
            .then(function(response) {
                return response.json();
            })
            .then(function(data) {
                document.getElementById('like-btn-{{ quote.id }}').textContent = 'üëç ' + data.likes;
            });
    });
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–∏–∑–ª–∞–π–∫–æ–≤
    document.getElementById('dislike-btn-{{ quote.id }}').addEventListener('click', function() {
        fetch('/dislike/{{ quote.id }}/')
            .then(function(response) {
                return response.json();
            })
            .then(function(data) {
                document.getElementById('dislike-btn-{{ quote.id }}').textContent = 'üëé ' + data.dislikes;
            });
    });
    </script>
</body>
</html> -->